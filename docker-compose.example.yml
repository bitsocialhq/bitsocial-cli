# Example Docker Compose for bitsocial-cli
#
# Quick start:
#   cp docker-compose.example.yml docker-compose.yml
#   docker compose up -d
#
# View logs (includes RPC auth key URL):
#   docker compose logs -f
#
# Access web UI:
#   Open the URL printed in logs, e.g.:
#   http://localhost:9138/seedit                (local connections only)
#   http://<your-ip>:9138/<auth-key>/seedit     (remote connections)

services:
  bitsocial:
    image: ghcr.io/bitsocialhq/bitsocial-cli:latest
    container_name: bitsocial
    restart: unless-stopped
    ports:
      - "9138:9138"    # Plebbit RPC + Web UI
      - "50019:50019"  # Kubo IPFS API
      - "6473:6473"    # IPFS Gateway
    volumes:
      - bitsocial-data:/data
      - bitsocial-logs:/logs
    environment:
      - DEBUG=bitsocial*, plebbit*, -plebbit*trace

      # Set a fixed RPC auth key instead of a random one.
      # Useful for bookmarking the web UI URL or scripting RPC access.
      # If left unset, a random key is generated (visible in `docker compose logs`).
      # - PLEBBIT_RPC_AUTH_KEY=your-custom-auth-key-here

      # Override Kubo IPFS bind addresses / ports:
      # - KUBO_RPC_URL=http://0.0.0.0:50019/api/v0
      # - IPFS_GATEWAY_URL=http://0.0.0.0:6473

    # # Uncomment to build from source instead of pulling the image:
    # build:
    #   context: .
    #   args:
    #     GITHUB_TOKEN: ${GITHUB_TOKEN:-}

volumes:
  bitsocial-data:
  bitsocial-logs:
